- kafka
	- ZooKeeper
	- Broker
	- Producer
	- Consumer
	- 主题（Topic）与分区（Partition）
	- 主题是⼀个逻辑上的概念，它还可以细分为多个分区，⼀个分区只属于单个主题，很多时候 也会把分区称为主题分区（Topic-Partition）。同⼀主题下的不同分区包含的消息是不同 的，分区在存储层⾯可以看作⼀个可追加的⽇志（Log）⽂件，消息在被追加到分区⽇志⽂ 件的时候都会分配⼀个特定的偏移量（offset）。
	- offset 是消息在分区中的唯⼀标识，Kafka 通过它来保证消息在分区内的顺序性，不过 offset 并不跨越分区，也就是说，Kafka 保证的是分区有序⽽不是主题有序。
		- 意思是ack时刻的消息有序
	- Kafka 中的 分区可以分布在不同的服务器（broker）上，也就是说，⼀个主题可以横跨多个 broker
	- 每⼀条消息被发送到 broker 之前，会根据分区规则选择存储到哪个具体的分区。如果分区 规则设定得合理，所有的消息都可以均匀地分配到不同的分区中。如果⼀个主题只对应⼀个 ⽂件，那么这个⽂件所在的机器I/O将会成为这个主题的性能瓶颈，⽽分区解决了这个问 题。
	- Kafka 为分区引⼊了多副本（Replica）机制，通过增加副本数量可以提升容灾能⼒。
	- 同⼀分区的不同副本中保存的是相同的消息（在同⼀时刻，副本之间并⾮完全⼀样），副本 之间是“⼀主多从”的关系，其中 leader 副本负责处理读写请求，follower 副本只负责与 leader 副本的消息同步。副本处于不同的 broker 中，当 leader 副本出现故障时，从 follower 副本中重新选举新的 leader 副本对外提供服务。Kafka 通过多副本机制实现了故 障的⾃动转移，当 Kafka 集群中某个 broker 失效时仍然能保证服务可⽤。
	- leader/follower如何选出
	- 主从延迟的数据丢失怎么办？
	- Consumer 使⽤拉（Pull）模式从服务端拉取消息， 并且保存消费的具体位置，当消费者宕机后恢复上线时可以根据之前保存的消费位置重新拉 取需要的消息进⾏消费，这样就不会造成消息丢失。
		- 消费者宕机不会将分区分给其他消费者吗？
	- leader 副本负责维护和跟踪 ISR 集合中所有 follower 副本的滞后状态，当 follower 副本落 后太多或失效时，leader 副本会把它从 ISR 集合中剔除。如果 OSR 集合中有 follower 副本 “追上”了 leader 副本，那么 leader 副本会把它从 OSR 集合转移⾄ ISR 集合。默认情况 下，当 leader 副本发⽣故障时，只有在 ISR 集合中的副本才有资格被选举为新的 leader， ⽽在 OSR 集合中的副本则没有任何机会